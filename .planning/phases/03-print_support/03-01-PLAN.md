# Phase 3: Print Support

## Goal
Enable D2 diagram rendering in LaTeX/PDF output.

## Strategy
1.  **Refactor `render_d2`**:
    *   Add `format` parameter (default: 'svg').
    *   Add logic to handle 'pdf' format.
    *   For 'pdf', generate a single output file (using Light theme `0` by default).
    *   Ensure `d2` command is called with correct extension for PDF.

2.  **Implement `latex_visit_d2`**:
    *   `def latex_visit_d2(self, node):`
    *   Call `render_d2(..., format='pdf')`.
    *   Generate LaTeX code: `self.body.append(r'\sphinxincludegraphics[]{%s}' % output_fname)`.

3.  **Update `setup`**:
    *   Register LaTeX visitor: `app.add_node(d2_node, html=(html_visit_d2, None), latex=(latex_visit_d2, None))`

## Tasks
- [ ] Refactor `render_d2` in `sphinxcontrib/d2/__init__.py`
- [ ] Add `latex_visit_d2` in `sphinxcontrib/d2/__init__.py`
- [ ] Update `setup` function in `sphinxcontrib/d2/__init__.py`
